1
00:00:09,000 --> 00:00:14,880
那麼，今天要來跟大家分享我們在「みてね」iOS應用中，關於持續進行背景上傳的挑戰

2
00:00:15,180 --> 00:00:17,980
請容我為各位做個簡報

3
00:00:21,880 --> 00:00:24,180
首先自我介紹

4
00:00:24,280 --> 00:00:26,620
我叫佐藤光

5
00:00:27,420 --> 00:00:30,980
目前在株式会社ミクシー(mixi, Inc.) 的「みてね(Mitene)」事業本部裡

6
00:00:31,020 --> 00:00:34,280
負責開發家族相簿APP「みてね」的 iOS 工程師

7
00:00:37,280 --> 00:00:40,580
今天的分享內容會從「什麼是みてね」開始，

8
00:00:40,580 --> 00:00:44,780
接著會談到去年我們在「みてね」實作的背景上傳功能，

9
00:00:44,780 --> 00:00:53,020
還有去年我們所解決的課題，以及當時採用的解法，最後會談談未來想做的事，

10
00:00:53,020 --> 00:00:56,020
以及如何活用 iOS 26 的新功能

11
00:01:00,220 --> 00:01:04,080
首先，什麼是「みてね」呢？

12
00:01:04,220 --> 00:01:07,280
啊，您有在用Mitene，謝謝

13
00:01:08,680 --> 00:01:13,980
這是一款將孩子的照片和影片分享給家人、享受交流樂趣的智慧型手機應用程式

14
00:01:16,580 --> 00:01:19,580
可以免費、無限制地分享照片和影片

15
00:01:22,480 --> 00:01:24,680
在這裡我想問大家一個問題，

16
00:01:26,280 --> 00:01:30,680
現在在場的各位中，有多少人正在使用Mitene呢？

17
00:01:30,680 --> 00:01:31,680
麻煩請舉個手

18
00:01:40,180 --> 00:01:41,980
大概20%左右嗎？

19
00:01:41,980 --> 00:01:45,220
不好意思，等一下希望能再聽聽各位的意見

20
00:01:45,220 --> 00:01:46,880
謝謝大家

21
00:01:48,880 --> 00:01:52,080
接下來要談的是......

22
00:01:52,080 --> 00:01:54,180
在Mitene這款App中，

23
00:01:54,220 --> 00:01:56,920
因為是分享照片和影片的應用程式，

24
00:01:56,920 --> 00:01:58,980
「上傳」這件事就非常重要

25
00:01:58,980 --> 00:02:02,980
改善上傳體驗，就是我們這次的主題

26
00:02:02,980 --> 00:02:11,580
關於去年我們在「上傳」方面所解決的課題......

27
00:02:11,580 --> 00:02:15,620
首先，課題究竟是什麼呢？

28
00:02:15,680 --> 00:02:19,720
那就是在照片影片上傳過程中，如果切換到背景模式，

29
00:02:19,720 --> 00:02:24,120
上傳會在30分鐘後被中斷，我們遇到了這樣的課題

30
00:02:24,780 --> 00:02:29,180
這就是在 iOS 中被稱為 beginBackgroundTask

31
00:02:29,180 --> 00:02:30,980
我想很多人可能都知道這個，

32
00:02:30,980 --> 00:02:33,180
這就是它的限制

33
00:02:33,220 --> 00:02:37,680
所以在Mitene上傳就會被中斷

34
00:02:37,680 --> 00:02:42,320
導致在上傳過程中，必須一直開著App才行

35
00:02:43,520 --> 00:02:48,320
在Mitene，一次上傳大量的照片和影片，

36
00:02:48,320 --> 00:02:49,720
是用戶的一種使用傾向，

37
00:02:49,720 --> 00:02:53,920
所以很容易因為這個限制而導致上傳中斷

38
00:02:58,880 --> 00:03:00,280
當上傳被中斷的時候，

39
00:03:00,320 --> 00:03:02,380
雖然現在這個畫面出現的......

40
00:03:02,380 --> 00:03:04,980
出現的條件已經少很多了，

41
00:03:05,020 --> 00:03:07,380
就會像這樣，上傳到一半

42
00:03:07,380 --> 00:03:09,180
上傳被中斷了，

43
00:03:09,180 --> 00:03:12,980
然後你就得『啊～』一聲，重新打開App，

44
00:03:12,980 --> 00:03:14,880
雖然上傳會從中斷的地方繼續，

45
00:03:14,920 --> 00:03:17,020
但就變成得這樣才能繼續

46
00:03:21,080 --> 00:03:26,680
首先，針對這個課題，我們探討了哪些解決方案呢？

47
00:03:26,680 --> 00:03:33,120
第一個方案，在去年算是相當主流的做法，

48
00:03:33,180 --> 00:03:38,780
就是考慮使用 `BGProcessingTask` 作為解決方案

49
00:03:38,820 --> 00:03:43,280
我們也在公司內部舉辦了功能性審查會議，

50
00:03:43,280 --> 00:03:47,520
但結論是這個規格和Mitene的上傳需求不太適合

51
00:03:47,520 --> 00:03:51,880
不適合的地方，大致就是寫在這裡的這幾點，

52
00:03:51,880 --> 00:03:56,420
它會在深夜、充電時，每次大概可以處理約5分鐘，

53
00:03:56,480 --> 00:03:58,580
每30分鐘

54
00:03:58,580 --> 00:04:01,080
雖然是訂在大概每30分鐘，

55
00:04:01,080 --> 00:04:03,680
差不多是這樣運作的

56
00:04:03,680 --> 00:04:05,920
首先，如果在深夜運作的話，

57
00:04:05,980 --> 00:04:08,080
當上傳完成時，

58
00:04:08,120 --> 00:04:10,880
Mitene會發送一個完成通知，

59
00:04:10,880 --> 00:04:12,180
那個通知就會在深夜被發送出去，

60
00:04:12,180 --> 00:04:16,780
這樣家人可能就會以為你『怎麼這麼晚還沒睡』之類的，

61
00:04:16,820 --> 00:04:18,580
我們有這樣的顧慮，

62
00:04:18,580 --> 00:04:22,020
所以最後沒有採用這個方案

63
00:04:22,880 --> 00:04:26,580
ok

64
00:04:26,820 --> 00:04:28,980
解決方案二

65
00:04:28,980 --> 00:04:30,780
我們也姑且評估了「Live Activity」，

66
00:04:30,820 --> 00:04:34,820
想說『這個說不定也行』，

67
00:04:35,180 --> 00:04:37,720
但因為它也是 Extension 的一種，

68
00:04:37,720 --> 00:04:42,280
所以沒辦法讓App端的處理程序繼續執行

69
00:04:46,280 --> 00:04:49,280
第三個解決方案

70
00:04:49,280 --> 00:04:51,480
我們最後採用了這個，

71
00:04:51,480 --> 00:04:55,720
就是用「Picture In Picture」製作了原型，

72
00:04:55,780 --> 00:04:58,480
原型大概是做成這個樣子，

73
00:04:58,480 --> 00:05:01,020
在這個UI上，Picture In Picture 的

74
00:05:01,020 --> 00:05:04,080
會跑出像這樣影片的操作按鈕，

75
00:05:04,120 --> 00:05:07,620
但透過這個方式，背景上傳

76
00:05:07,620 --> 00:05:12,780
就能不受剛才提到的30秒限制，得以繼續執行，

77
00:05:12,780 --> 00:05:14,120
所以我們採用了這個方案

78
00:05:19,280 --> 00:05:22,820
接下來是我們實際發布的功能

79
00:05:24,080 --> 00:05:26,120
這個有在動嗎?

80
00:05:26,180 --> 00:05:30,780
有在動嗎？咦？沒在動？

81
00:05:36,480 --> 00:05:38,580
哎呀，影片完全不會動

82
00:05:38,620 --> 00:05:40,680
我之後會再上傳簡報資料，

83
00:05:40,680 --> 00:05:43,780
到時候再請大家觀看

84
00:05:45,580 --> 00:05:48,220
實際上開始上傳時，

85
00:05:49,020 --> 00:05:50,980
這個...會動...看來真的不會動呢，抱歉。

86
00:05:52,920 --> 00:05:57,480
會像這樣顯示 Picture In Picture 的畫面，

87
00:05:57,580 --> 00:06:02,720
在上傳過程中切換到背景時，

88
00:06:02,720 --> 00:06:06,880
藉由將 `UIView` 以 Picture In Picture 顯示，

89
00:06:06,920 --> 00:06:11,780
我們發布了這個能讓上傳繼續進行的功能

90
00:06:11,780 --> 00:06:18,520
這個功能是 `Mitene Premium Pro` 的限定功能

91
00:06:18,520 --> 00:06:22,580
我們 mixi 也已經提出了專利申請

92
00:06:22,580 --> 00:06:26,520
這裡我還想再問一個問題

93
00:06:26,520 --> 00:06:31,420
在Mitene上傳過程中切換到背景時，

94
00:06:31,480 --> 00:06:34,980
這裡會用 Picture In Picture 顯示一個畫面，

95
00:06:34,980 --> 00:06:38,620
有多少人注意到這件事了呢？

96
00:06:38,680 --> 00:06:41,280
可以的話請舉個手

97
00:06:42,780 --> 00:06:45,580
看來是沒有人呢

98
00:06:47,080 --> 00:06:51,480
順帶一提，剛剛使用Mitene的用戶，

99
00:06:51,480 --> 00:06:54,120
我記得有幾位，

100
00:06:54,120 --> 00:06:56,680
請問有加入 Mitene Premium 的用戶

101
00:06:56,720 --> 00:06:59,580
大概有多少位呢？

102
00:07:02,080 --> 00:07:03,580
2位

103
00:07:03,580 --> 00:07:05,380
謝謝

104
00:07:05,580 --> 00:07:07,920
我們還有一個更進階的方案叫 Premium Pro，

105
00:07:07,920 --> 00:07:09,220
有加入那個方案的......

106
00:07:09,220 --> 00:07:13,580
您是 Premium 方案是嗎？

107
00:07:13,580 --> 00:07:15,720
原來如此，不好意思，謝謝您

108
00:07:16,880 --> 00:07:19,980
Premium Pro 是比較高階的方案，一個月大概1000日圓，

109
00:07:20,020 --> 00:07:22,880
如果有加入那個方案，就會出現

110
00:07:25,680 --> 00:07:30,780
接下來談談這個解決方案誕生的背景

111
00:07:32,020 --> 00:07:34,280
當時在討論 `BGProcessingTask` 方案時，

112
00:07:34,280 --> 00:07:38,580
我們決定要在公司內部進行功能性審查，

113
00:07:38,580 --> 00:07:43,480
在那之前，大家在討論要怎麼請大家協助審查，

114
00:07:43,480 --> 00:07:48,180
大概4個人左右，在討論時冒出的一個點子

115
00:07:48,180 --> 00:07:51,780
那時候聊到 Pictuire In Picture，

116
00:07:51,820 --> 00:07:54,480
『那個是不是能讓App的程序繼續執行啊？』

117
00:07:54,480 --> 00:07:57,080
『好像可以耶』，就聊了這樣的話題

118
00:07:57,080 --> 00:08:01,720
於是我們就試著做了一下，把它加進去，

119
00:08:01,720 --> 00:08:04,280
結果發現『喔！這突破背景限制了耶！』

120
00:08:04,280 --> 00:08:05,320
就變成了那種感覺，

121
00:08:05,320 --> 00:08:08,180
就是這樣

122
00:08:08,180 --> 00:08:09,380
在討論的過程中，

123
00:08:09,420 --> 00:08:13,720
我們也聊到，如果 Picture In PIcture 能維持App程序，

124
00:08:13,720 --> 00:08:17,480
那我們是不是可以播放一個適合的、像樣的本地影片，

125
00:08:17,480 --> 00:08:21,780
一邊播放一邊繼續上傳，『這樣是不是也行得通啊？』

126
00:08:21,780 --> 00:08:25,620
當時也聊了這樣的話題，還滿熱烈的

127
00:08:28,220 --> 00:08:33,180
關於它的機制，大致上是像這個樣子，

128
00:08:33,180 --> 00:08:37,480
我們將 `UIView` 轉換成影片影格，

129
00:08:37,480 --> 00:08:40,620
然後用 Picture In Picture 顯示出來

130
00:08:40,620 --> 00:08:42,780
我們做的就是這樣的事情

131
00:08:42,780 --> 00:08:49,280
之所以要轉換成影片影格，

132
00:08:49,320 --> 00:08:52,320
是因為 Picture In Picture 能夠顯示的

133
00:08:52,320 --> 00:08:55,980
就是影片影格，所以才需要轉換

134
00:08:58,620 --> 00:09:05,580
這個方案，我們大量參考了像這樣的參考資料

135
00:09:07,920 --> 00:09:10,480
我腦中原本就有印象，

136
00:09:10,480 --> 00:09:12,180
『啊，本來就有這種東西』，

137
00:09:12,180 --> 00:09:14,780
大概就是那樣才做出來的

138
00:09:17,980 --> 00:09:23,120
接下來，要談談困難的地方

139
00:09:26,480 --> 00:09:28,480
大致上有三個

140
00:09:29,980 --> 00:09:32,420
要讓 `UIView` 顯示在 PIcture In PIcture

141
00:09:32,420 --> 00:09:34,920
實作本身就很困難；

142
00:09:34,980 --> 00:09:36,780
再來是

143
00:09:36,780 --> 00:09:40,080
切換到背景時自動啟動 PIP；

144
00:09:40,280 --> 00:09:43,920
還有 Picture In Picture 的 UI 顯示和限制，

145
00:09:43,920 --> 00:09:46,480
這些地方都相當困難

146
00:09:51,180 --> 00:09:56,480
我會來稍微深入探討一下這些困難的地方，

147
00:09:56,480 --> 00:10:02,220
首先，是關於將 `UIView` 顯示在 Picture In Picture 的實作，

148
00:10:02,280 --> 00:10:08,020
這個嘛，首先是實作本身就很困難

149
00:10:08,480 --> 00:10:10,120
這個「轉換成影片影格」的部分，

150
00:10:10,120 --> 00:10:11,720
雖然有很多參考資料，

151
00:10:11,780 --> 00:10:14,980
但實際做起來還是有很多困難點

152
00:10:15,020 --> 00:10:20,620
另外，要啟用 Picture In Picture 是有條件的，

153
00:10:20,620 --> 00:10:24,380
像是這些背景模式的條件，

154
00:10:24,980 --> 00:10:25,880
是背景模式的設定才對，

155
00:10:25,920 --> 00:10:27,820
的確認

156
00:10:27,820 --> 00:10:35,020
或是需要設定 `AVAudioSession` 的 category 為 playback 之類的，

157
00:10:35,080 --> 00:10:37,180
這些都很不容易注意到，

158
00:10:37,220 --> 00:10:39,680
雖然參考資料上好像有寫，

159
00:10:39,680 --> 00:10:41,980
但那些地方都很困難

160
00:10:42,020 --> 00:10:45,080
還有，即使 Picture In Picture 沒有啟動，

161
00:10:45,080 --> 00:10:47,480
也經常不會回傳錯誤，

162
00:10:47,480 --> 00:10:49,580
導致『怎麼沒有啟動』的狀況。

163
00:10:49,580 --> 00:10:52,380
就變成了那種感覺

164
00:10:54,480 --> 00:10:57,980
為了幫自己回想一下實作方式，

165
00:10:57,980 --> 00:11:01,980
我用最精簡的程式碼公開了範例，

166
00:11:01,980 --> 00:11:07,280
有興趣的人之後可以看看

167
00:11:10,580 --> 00:11:14,380
接下來是實作困難點的一個例子

168
00:11:15,720 --> 00:11:17,280
這個紅框的附近

169
00:11:17,420 --> 00:11:18,580
像是「in Picture in Picture」

170
00:11:18,580 --> 00:11:19,720
這個字串

171
00:11:20,680 --> 00:11:22,080
並不是我們用 Label 顯示的，

172
00:11:22,080 --> 00:11:24,220
它是會自動跑出來的，

173
00:11:24,220 --> 00:11:25,880
有像這樣的狀況，

174
00:11:25,880 --> 00:11:28,620
所以我們得把它設成透明讓它看不見，

175
00:11:28,680 --> 00:11:30,580
我們下了一些這樣的工夫

176
00:11:33,780 --> 00:11:36,280
困難點的第二個

177
00:11:38,420 --> 00:11:39,880
自動...切換到背景時自動...

178
00:11:39,880 --> 00:11:41,680
啟動 Pictuire In Picture

179
00:11:43,820 --> 00:11:45,580
這個就是

180
00:11:46,280 --> 00:11:50,280
可以自動開始PiP的屬性

181
00:11:50,620 --> 00:11:52,080
雖然有這樣的屬性，

182
00:11:52,080 --> 00:11:54,820
但它運作的條件，

183
00:11:54,820 --> 00:11:57,680
並沒有特別寫在文件上，

184
00:11:57,680 --> 00:11:59,280
也許仔細看的話有寫吧，

185
00:11:59,280 --> 00:12:03,580
但我們找不到，所以很困難

186
00:12:04,320 --> 00:12:05,420
條件就是...

187
00:12:05,880 --> 00:12:07,780
照著念的話

188
00:12:07,880 --> 00:12:10,180
像是 `AVSampleBufferDisplayLayer`

189
00:12:10,180 --> 00:12:12,680
就是剛才的影片影格，

190
00:12:12,680 --> 00:12:14,520
它必須已經被繪製出來，

191
00:12:14,520 --> 00:12:16,320
必須事先被繪製出來，

192
00:12:16,320 --> 00:12:18,680
或是在切換到背景之前，

193
00:12:18,680 --> 00:12:21,380
`PictuireInPictureController` 必須已被初始化，

194
00:12:21,980 --> 00:12:22,480
之類的，

195
00:12:22,480 --> 00:12:24,080
還有 delegate 的

196
00:12:24,120 --> 00:12:26,080
這個 method 的布林值

197
00:12:26,080 --> 00:12:27,120
必須是 false 之類的

198
00:12:27,980 --> 00:12:30,280
就是有很多這種看不見的條件，

199
00:12:30,280 --> 00:12:31,880
就是這樣

200
00:12:37,680 --> 00:12:40,280
Delegate 的程式碼大概是長這樣，

201
00:12:40,280 --> 00:12:43,180
大家現在看到的是我們正在用的版本

202
00:12:43,180 --> 00:12:45,480
大概就是像這個樣子

203
00:12:48,720 --> 00:12:50,120
還有，為了在切換到背景時自動

204
00:12:50,120 --> 00:12:52,480
啟動 Picture In PIcture

205
00:12:52,480 --> 00:12:54,320
我們的做法是，

206
00:12:54,380 --> 00:12:58,380
在 root window 上將 Picture In Picture 的 UIView

207
00:12:58,380 --> 00:13:01,880
用這種方式，以看不見的形式加上去，

208
00:13:01,880 --> 00:13:07,780
會這麼做，是為了讓App在上傳過程中，無論從哪個畫面

209
00:13:08,380 --> 00:13:11,580
切換到背景時，都能啟動 ピクチャーインピクチャー，

210
00:13:11,580 --> 00:13:15,880
為了做到這點，我們才用了這樣的架構

211
00:13:19,880 --> 00:13:21,480
第三點

212
00:13:21,580 --> 00:13:25,280
關於 Picture In Picture 的 UI 顯示與限制

213
00:13:27,780 --> 00:13:29,480
那個...我突然覺得好緊張，

214
00:13:29,480 --> 00:13:32,120
可以讓我深呼吸一下嗎？

215
00:13:38,380 --> 00:13:40,620
不好意思

216
00:13:40,820 --> 00:13:42,680
還剩幾分鐘...12分鐘

217
00:13:46,180 --> 00:13:47,380
好，我沒問題了

218
00:13:49,820 --> 00:13:51,880
謝謝

219
00:13:51,980 --> 00:13:55,520
然後，Pictuire In Picutre 的 UI 是這樣

220
00:13:56,020 --> 00:13:59,420
會慢慢地顯示出來

221
00:14:01,380 --> 00:14:03,580
會顯示像這樣的 UI

222
00:14:03,580 --> 00:14:09,280
然後，那個...

223
00:14:09,880 --> 00:14:11,580
對。

224
00:14:18,180 --> 00:14:22,880
這個 Picture In Picture 畢竟是為影片設計的模組，

225
00:14:22,880 --> 00:14:26,380
所以會跑出像是播放按鈕或暫停按鈕，

226
00:14:26,420 --> 00:14:29,580
結果是現在也還是會顯示，

227
00:14:29,580 --> 00:14:31,880
現在真的就是這個樣子

228
00:14:31,880 --> 00:14:33,580
左邊有關閉按鈕，

229
00:14:33,620 --> 00:14:36,080
右邊有返回App的按鈕，

230
00:14:36,080 --> 00:14:38,320
中間有暫停按鈕，

231
00:14:38,320 --> 00:14:41,180
還有一個進度條

232
00:14:43,580 --> 00:14:45,580
這部分我們基本上就是維持預設的樣子，

233
00:14:45,580 --> 00:14:47,780
雖然可以為暫停按鈕編寫處理邏輯，

234
00:14:47,780 --> 00:14:49,980
但我們都沒處理

235
00:14:51,420 --> 00:14:55,980
關於這個行為，我們公司內部也討論過

236
00:14:55,980 --> 00:14:58,680
是否要採取什麼對策，

237
00:14:58,680 --> 00:15:01,480
但結論是「這應該沒什麼關係吧？」

238
00:15:01,480 --> 00:15:03,120
「畢竟也不是一直都顯示著」

239
00:15:03,120 --> 00:15:04,580
因為這樣，

240
00:15:04,580 --> 00:15:09,780
我們發布時就真的什麼處理都沒寫，

241
00:15:09,780 --> 00:15:13,620
到目前為止，也沒收到用戶反應說「這個很難懂」

242
00:15:13,680 --> 00:15:17,880
之類的回饋

243
00:15:21,480 --> 00:15:24,180
接下來還是關於限制的部分，

244
00:15:24,180 --> 00:15:27,920
有一個會變全黑的問題

245
00:15:28,380 --> 00:15:32,280
就是從裝置鎖定狀態解除時，

246
00:15:32,280 --> 00:15:37,080
PIP 的畫面有時會變全黑

247
00:15:38,480 --> 00:15:43,820
為了盡可能避免這個現象，

248
00:15:43,880 --> 00:15:48,580
我們對 PIP 的畫面更新，

249
00:15:48,580 --> 00:15:57,080
下了一點工夫，讓它最長、最長也是 1 分鐘就更新一次顯示

250
00:16:00,720 --> 00:16:03,120
還是關於限制的部分

251
00:16:03,980 --> 00:16:05,780
對，這是一段影片，

252
00:16:05,780 --> 00:16:08,220
但看來影片是播不出來了

253
00:16:08,220 --> 00:16:12,420
等我之後上傳簡報資料時

254
00:16:12,480 --> 00:16:14,180
會再放進去

255
00:16:15,220 --> 00:16:16,620
就如同這裡寫的，

256
00:16:16,620 --> 00:16:19,720
如果在其他App啟動了 Picture In Picture，

257
00:16:19,780 --> 00:16:21,280
因為  Picture In Picture，

258
00:16:21,280 --> 00:16:25,080
在一台裝置上只能播放一個，

259
00:16:26,280 --> 00:16:28,120
就會被其他App覆蓋過去，

260
00:16:28,120 --> 00:16:30,120
導致上傳停止，

261
00:16:30,120 --> 00:16:31,880
這是一個限制

262
00:16:32,420 --> 00:16:34,980
例如，Mitene 正在上傳時，

263
00:16:34,980 --> 00:16:37,820
你跑去看了 YouTube，

264
00:16:37,820 --> 00:16:40,580
看 YouTube 是沒問題的，

265
00:16:40,580 --> 00:16:44,480
但看完後，YouTube 如果有加入 Premium 方案，

266
00:16:44,480 --> 00:16:46,180
我記得好像是 Premium 方案沒錯，

267
00:16:46,180 --> 00:16:47,280
切到背景時

268
00:16:47,320 --> 00:16:50,380
它會啟動 Picture In Picture，

269
00:16:51,620 --> 00:16:54,480
一旦它啟動了，我們的就會被「搶走」，

270
00:16:54,880 --> 00:16:56,880
上傳就會因此結束。

271
00:17:00,020 --> 00:17:02,080
啊，出來了

272
00:17:03,380 --> 00:17:05,780
但還是沒辦法播放

273
00:17:07,220 --> 00:17:12,580
接著，是  Picture In Picture 背景上傳 *無法* 解決的問題

274
00:17:15,420 --> 00:17:18,580
無法解決的問題是，

275
00:17:19,920 --> 00:17:22,780
在裝置鎖定時的上傳

276
00:17:25,280 --> 00:17:28,280
Picture In Picture 本身在裝置鎖定時，

277
00:17:28,280 --> 00:17:30,680
並不會被強制終止…

278
00:17:31,420 --> 00:17:35,980
但在那個時間點...應該說，這依裝置而定，

279
00:17:35,980 --> 00:17:42,080
鎖定後，可能過一段時間，也可能馬上，

280
00:17:42,080 --> 00:17:45,120
程序會暫時停止

281
00:17:45,120 --> 00:17:48,420
記憶體的狀態會被保留，

282
00:17:48,480 --> 00:17:53,980
所以解除鎖定時，程序會恢復執行，

283
00:17:53,980 --> 00:17:58,080
但上傳（的連線）會因為逾時而中斷

284
00:18:02,620 --> 00:18:05,180
接下來是關於 Apple 審查的對策。

285
00:18:05,220 --> 00:18:07,980
在審查對策方面，

286
00:18:08,020 --> 00:18:14,520
其實結果是很普通地、沒什麼問題就通過了

287
00:18:15,020 --> 00:18:18,480
那為什麼我們還要特地準備審查對策呢？

288
00:18:18,480 --> 00:18:20,680
是因為  Picture In Picture 的啟動，

289
00:18:20,720 --> 00:18:23,780
必須由用戶操作來啟動，

290
00:18:23,780 --> 00:18:26,780
文件上有這樣的記載

291
00:18:27,320 --> 00:18:29,620
我們不太確定，

292
00:18:29,620 --> 00:18:32,720
「切換到背景」這個動作，

293
00:18:32,780 --> 00:18:35,680
到底算不算是（用戶操作），

294
00:18:35,680 --> 00:18:37,580
因為覺得可能不太好說，

295
00:18:37,620 --> 00:18:42,620
所以想說保險起見，問問看這樣可不可以，

296
00:18:42,620 --> 00:18:44,680
就送審了

297
00:18:45,980 --> 00:18:47,380
結果沒什麼問題就通過了

298
00:18:49,220 --> 00:18:53,320
送審的方式，我想這大家應該很常用

299
00:18:54,620 --> 00:18:57,720
就是在 App Store Connect 的「App Review 相關資訊」

300
00:18:57,720 --> 00:18:58,380
這裡，

301
00:18:58,380 --> 00:19:01,980
在這個紅框的地方，作為備註

302
00:19:01,980 --> 00:19:03,780
寫下功能的詳細說明，

303
00:19:03,780 --> 00:19:08,980
然後附上影片送出

304
00:19:11,280 --> 00:19:12,580
Apple 也沒有對這個功能回覆什麼感想，

305
00:19:12,620 --> 00:19:16,620
就很普通地被核准了

306
00:19:19,720 --> 00:19:20,520
範例程式碼

307
00:19:20,720 --> 00:19:22,580
就是剛才那個

308
00:19:22,620 --> 00:19:27,880
這個我大概沒時間介紹了，

309
00:19:27,880 --> 00:19:31,680
我就簡單說明一下

310
00:19:33,380 --> 00:19:35,820
用 UIView 顯示 PIP，

311
00:19:35,820 --> 00:19:41,580
並且讓 PIP 在切換到背景時自動啟動，

312
00:19:41,620 --> 00:19:43,680
把這部分用最精簡的程式碼

313
00:19:43,680 --> 00:19:47,520
我記得大概用 200 還 300 行左右寫出來了

314
00:19:47,520 --> 00:19:50,820
抱歉，影片還是不能播

315
00:19:51,820 --> 00:19:57,720
等我上傳簡報後，有興趣的人再麻煩看一下

316
00:20:03,580 --> 00:20:07,080
接下來是未來想做的事

317
00:20:07,920 --> 00:20:10,820
活用 iOS26 的 SDK

318
00:20:10,880 --> 00:20:12,980
XCode26

319
00:20:13,780 --> 00:20:17,280
基本上我們是用 RC 版進行了驗證

320
00:20:17,280 --> 00:20:19,380
還剩下...

321
00:20:19,380 --> 00:20:21,420
還有21分鐘

322
00:20:26,880 --> 00:20:30,880
作為 iOS26 和 XCode26 的新功能，

323
00:20:30,880 --> 00:20:36,580
有一個可以在前景啟動的 `BGContinuedProcessingTask`，

324
00:20:36,580 --> 00:20:39,920
在 WWDC 上發表了

325
00:20:40,520 --> 00:20:44,620
這個功能和我們用 Picture In Picture 做的上傳非常相似，

326
00:20:45,280 --> 00:20:46,480
「這是不是能用啊？」

327
00:20:46,480 --> 00:20:48,480
「感覺可以喔？」

328
00:20:48,480 --> 00:20:50,220
公司裡

329
00:20:50,220 --> 00:20:52,180
有很懂 iOS 的

330
00:20:52,220 --> 00:20:53,620
人，

331
00:20:53,620 --> 00:20:56,120
他就去做了調查

332
00:20:56,120 --> 00:20:58,580
如果我也有認真看（WWDC）的話，

333
00:20:58,580 --> 00:20:59,680
或許我也會注意到，

334
00:20:59,720 --> 00:21:02,580
但我也是被提醒了才發現，

335
00:21:02,580 --> 00:21:03,220
所以就覺得

336
00:21:03,220 --> 00:21:05,920
「啊，我真是」

337
00:21:05,980 --> 00:21:08,580
「學習不足啊」，

338
00:21:08,580 --> 00:21:09,580
但還好他提醒了我，

339
00:21:09,620 --> 00:21:11,480
我們才能夠去調查

340
00:21:14,780 --> 00:21:16,980
至於它是什麼樣的東西呢？

341
00:21:17,620 --> 00:21:21,680
它是在前景透過按鈕點擊之類的動作來啟動，

342
00:21:21,720 --> 00:21:29,180
有需要的話，也會顯示在前景。

343
00:21:29,180 --> 00:21:32,420
進度會用 Live Activity 顯示，

344
00:21:32,420 --> 00:21:35,280
用戶也可以隨時取消，

345
00:21:35,280 --> 00:21:40,520
按下右邊的按鈕就能取消

346
00:21:42,420 --> 00:21:44,380
它的優點是，

347
00:21:44,380 --> 00:21:49,280
剛才提到的裝置鎖定時無法上傳的問題，

348
00:21:49,320 --> 00:21:51,220
這個問題能被解決，

349
00:21:51,220 --> 00:21:52,180
是個很大的優點，

350
00:21:52,180 --> 00:21:54,680
對 Mitene 來說是個非常大的優點

351
00:21:56,080 --> 00:21:57,680
缺點方面，

352
00:21:57,680 --> 00:22:01,620
我等一下會再說明，

353
00:22:01,620 --> 00:22:04,680
其實沒有什麼太大的缺點，

354
00:22:04,680 --> 00:22:06,520
就是有一些限制，

355
00:22:06,520 --> 00:22:10,320
UI 方面也或多或少會受到一些限制，

356
00:22:10,380 --> 00:22:14,380
勉強要說的話，大概就是這些吧

357
00:22:14,380 --> 00:22:17,880
好，關於 UI，

358
00:22:17,880 --> 00:22:21,880
這張投影片大概全都是影片，

359
00:22:21,880 --> 00:22:24,880
我猜是看不了了

360
00:22:24,880 --> 00:22:26,880
啊，勉強能看到一點。完成的時候，

361
00:22:26,880 --> 00:22:32,220
其實右邊會出現一個 Checkwork 表示完成。

362
00:22:41,680 --> 00:22:42,980
當它縮到狀態列時，

363
00:22:42,980 --> 00:22:47,780
會依裝置而定，但就像這樣變成藍色的。

364
00:22:47,780 --> 00:22:52,480
裝置鎖定時也是像這樣，

365
00:22:52,480 --> 00:22:55,580
會顯示 Live Activity，

366
00:22:55,580 --> 00:22:59,480
這時候一樣可以進行取消之類的動作

367
00:23:03,780 --> 00:23:05,980
可以自訂的部分，

368
00:23:06,020 --> 00:23:08,720
是標題和副標題，

369
00:23:08,720 --> 00:23:11,820
可以放入字串

370
00:23:12,080 --> 00:23:14,220
左側會自動顯示 App 的 Icon

371
00:23:14,580 --> 00:23:19,380
右側則是顯示進度

372
00:23:21,680 --> 00:23:25,680
關於進度顯示的部分，

373
00:23:25,680 --> 00:23:29,480
透過 `completedUnitedCount` 這個變數，

374
00:23:29,480 --> 00:23:32,180
和 `totalUnitedCount` 這個變數，

375
00:23:32,220 --> 00:23:39,980
去指定完成數和總數，就能做出來

376
00:23:41,880 --> 00:23:44,480
當完成數達到總數時，

377
00:23:44,480 --> 00:23:46,180
就會出現這個打勾符號，

378
00:23:46,220 --> 00:23:48,220
規格就是這樣

379
00:23:52,820 --> 00:23:54,520
還有，這是我做了才發現的，

380
00:23:54,520 --> 00:23:59,680
文字顏色和背景顏色好像沒辦法指定，

381
00:23:59,720 --> 00:24:03,920
我覺得在某些情況下可能會很難閱讀。

382
00:24:06,780 --> 00:24:08,480
這就是剛才說的，

383
00:24:08,480 --> 00:24:09,820
縮到狀態列的時候

384
00:24:09,880 --> 00:24:14,020
這個，上面是 iPhone SE3，

385
00:24:14,080 --> 00:24:21,620
SE3 的顯示；下面是 iPhone 16e 的顯示

386
00:24:23,820 --> 00:24:27,920
關於實作方法，

387
00:24:30,720 --> 00:24:32,420
背景模式的指定...

388
00:24:32,420 --> 00:24:33,680
雖然是背景任務，

389
00:24:33,680 --> 00:24:37,980
但它是不需要指定背景模式的

390
00:24:37,980 --> 00:24:40,620
一般在做背景模式時，

391
00:24:40,620 --> 00:24:45,780
不是會在 Xcode 這裡追加 Capability 然後打勾嗎？

392
00:24:45,820 --> 00:24:46,820
Xcode 好像有這個吧。

393
00:24:46,820 --> 00:24:47,820
這個就不需要了。

394
00:24:47,880 --> 00:24:50,980
是連 "Background Modes" 本身都不需要

395
00:24:51,480 --> 00:24:53,180
它就是這樣設計的

396
00:24:56,380 --> 00:24:59,180
plist 裡面需要填入 Background Task 的 ID。

397
00:24:59,180 --> 00:25:01,980
必須把這個加進去

398
00:25:01,980 --> 00:25:05,380
我想這點和其他的 Background Task 是一樣的

399
00:25:07,980 --> 00:25:12,020
程式碼大致上是像這個樣子

400
00:25:12,420 --> 00:25:13,380
現在幾分鐘了？

401
00:25:13,420 --> 00:25:14,380
14分

402
00:25:18,080 --> 00:25:19,680
我稍微解說一下

403
00:25:19,680 --> 00:25:21,480
這個 `register`

404
00:25:21,520 --> 00:25:24,420
`BGTaskScheduler.register`

405
00:25:24,420 --> 00:25:27,420
這個在其他的 background task

406
00:25:27,420 --> 00:25:30,980
要註冊處理程序時，我想也是用一樣的東西，

407
00:25:31,020 --> 00:25:32,720
執行這個之後，

408
00:25:32,720 --> 00:25:36,220
在這個 closure 裡面，會在要被處理時被呼叫，

409
00:25:36,220 --> 00:25:41,320
它會在 main thread 以外的 background thread 執行

410
00:25:41,320 --> 00:25:47,780
之後再把它 casting 成 `BGProcessingTask`，

411
00:25:47,820 --> 00:25:49,780
`expirationHandler` 這邊，

412
00:25:49,780 --> 00:25:52,680
這是在按下取消按鈕時，

413
00:25:52,680 --> 00:25:56,520
或是系統因為某些資源限制

414
00:25:56,520 --> 00:25:58,420
自動取消時也會被呼叫，

415
00:25:58,420 --> 00:26:02,280
我們要寫一個像那樣的 handler，

416
00:26:02,280 --> 00:26:07,680
決定進度的值和管理方式，

417
00:26:07,680 --> 00:26:14,420
把進度的值 +1 之類的，慢慢地 increment 上去，

418
00:26:14,420 --> 00:26:19,580
然後更新標題或副標題，

419
00:26:19,580 --> 00:26:25,180
最後是 `setTaskCompleted`

420
00:26:25,180 --> 00:26:28,480
在這裡傳入一個布林值，表示成功或失敗，

421
00:26:28,520 --> 00:26:32,220
然後就結束了

422
00:26:32,220 --> 00:26:33,720
大概是像這樣

423
00:26:33,720 --> 00:26:39,380
關於提交執行的請求，

424
00:26:39,420 --> 00:26:41,480
是像這個樣子

425
00:26:41,480 --> 00:26:43,920
建立一個 request，

426
00:26:43,920 --> 00:26:47,480
建立 request 時也可以決定標題和副標題，

427
00:26:47,480 --> 00:26:52,880
有兩種 strategy 可以指定，

428
00:26:52,880 --> 00:26:54,820
指定那個，

429
00:26:54,820 --> 00:27:00,720
如果要用 GPU 的話，就要指定說「我要用 GPU」，

430
00:27:00,720 --> 00:27:01,720
做那樣的指定，

431
00:27:01,720 --> 00:27:05,020
然後 `BGTaskScheduler.submit` 出去

432
00:27:05,080 --> 00:27:07,180
就是這樣的感覺

433
00:27:07,180 --> 00:27:12,180
關於「使用 GPU」這部分，

434
00:27:12,180 --> 00:27:13,780
像這樣子，

435
00:27:13,780 --> 00:27:19,580
必須要在 Capability 裡面指定

436
00:27:20,580 --> 00:27:24,220
然後，驗證之後發現了一些事情，

437
00:27:24,280 --> 00:27:27,520
我想跟大家分享一下

438
00:27:29,920 --> 00:27:32,380
首先是...

439
00:27:34,680 --> 00:27:38,920
這個進度的值，基本上為了讓它接近總數，

440
00:27:38,980 --> 00:27:40,320
會去做 increment，

441
00:27:40,320 --> 00:27:43,680
就是會慢慢增加它，

442
00:27:43,720 --> 00:27:46,880
如果這個值一定時間內沒有變化的話，

443
00:27:46,880 --> 00:27:49,620
background task 本身會被停止，

444
00:27:49,620 --> 00:27:53,080
我們確認到了這個現象

445
00:27:53,080 --> 00:27:56,520
從這張圖也可以看出來，

446
00:27:56,580 --> 00:28:01,580
它停止的時間，並不是固定的

447
00:28:01,620 --> 00:28:03,920
以我驗證的感覺是，

448
00:28:03,920 --> 00:28:08,480
它最少會等個 30 秒左右

449
00:28:09,520 --> 00:28:11,620
但大概過了 30 秒，

450
00:28:11,680 --> 00:28:13,720
有時 30 秒，有時 70 秒，

451
00:28:13,720 --> 00:28:15,580
像這個例子就是 70 秒，

452
00:28:15,580 --> 00:28:19,180
一旦沒有變化，系統就會自動把它停掉

453
00:28:19,220 --> 00:28:22,280
它就是這樣的行為

454
00:28:22,580 --> 00:28:27,220
有些處理程序可能是那種不知道進度的，

455
00:28:27,220 --> 00:28:29,920
「雖然不知道進度，但還在跑」的這種，

456
00:28:29,920 --> 00:28:31,620
即使是那種情況，

457
00:28:31,620 --> 00:28:33,880
如果要用 `Continued Background`...

458
00:28:33,880 --> 00:28:38,080
`Continued Processing Task`

459
00:28:38,080 --> 00:28:45,680
如果要用它的話，就必須增加進度的值，

460
00:28:45,680 --> 00:28:49,880
得下點工夫，避免被系統停掉才行

461
00:28:53,180 --> 00:28:55,320
驗證後發現的第二件事

462
00:28:56,620 --> 00:29:00,780
這個嘛，我記得其他的 background task 好像也是一樣的，

463
00:29:00,780 --> 00:29:02,680
它在模擬器上是無法運作的

464
00:29:02,720 --> 00:29:07,480
再來是這個...

465
00:29:07,480 --> 00:29:13,120
至少在 RC 版，Xcode 的 Swift Language Version

466
00:29:13,120 --> 00:29:15,880
我沒有試 4，

467
00:29:15,880 --> 00:29:17,980
5 是沒問題的，

468
00:29:17,980 --> 00:29:21,580
但如果設成 6，在 submit 的時候會 crash。

469
00:29:21,580 --> 00:29:24,180
我們確認到了這個問題

470
00:29:24,220 --> 00:29:29,380
我已經姑且回報了 bug report。

471
00:29:31,280 --> 00:29:37,880
還有，`BGContinuedProcessingTask`...

472
00:29:37,880 --> 00:29:40,980
剛才那個UI

473
00:29:40,980 --> 00:29:44,020
我們發現，一個 App 似乎只能有一個。

474
00:29:44,080 --> 00:29:49,980
就算 submit 了第二個，第二個也無法啟動，

475
00:29:49,980 --> 00:29:54,220
沒辦法同時並行兩三個，

476
00:29:54,220 --> 00:30:00,480
這個...我猜，說不定是一台裝置只能有一個，

477
00:30:00,520 --> 00:30:03,180
至於能不能跨 App，

478
00:30:03,180 --> 00:30:05,820
是一個 App 只能一個呢？

479
00:30:05,820 --> 00:30:07,820
還是一台裝置只能一個？

480
00:30:07,820 --> 00:30:08,680
也許是後者吧，

481
00:30:08,680 --> 00:30:10,520
這部分我們還沒搞清楚。

482
00:30:13,780 --> 00:30:14,780
還有這個...

483
00:30:16,380 --> 00:30:17,880
Picture In Picture 說不定

484
00:30:17,880 --> 00:30:19,820
也是一樣的，

485
00:30:19,880 --> 00:30:23,280
就是在系統本身資源受限的狀態下，

486
00:30:23,280 --> 00:30:26,680
它會很容易被中斷。

487
00:30:31,580 --> 00:30:32,980
這個嘛...

488
00:30:32,980 --> 00:30:34,980
不知道是不是只有

489
00:30:34,980 --> 00:30:37,820
我的驗證裝置才會這樣，

490
00:30:37,820 --> 00:30:39,480
但至少我用來驗證的裝置，

491
00:30:39,480 --> 00:30:41,780
升級到 iOS26...

492
00:30:41,780 --> 00:30:46,020
我有兩台裝置升級了，

493
00:30:46,080 --> 00:30:48,220
那兩台裝置，

494
00:30:48,220 --> 00:30:51,880
自從升到正式版之後，

495
00:30:51,880 --> 00:30:53,680
`BGContinuedProcessingTask`

496
00:30:53,680 --> 00:30:56,420
就完全無法啟動了

497
00:30:57,920 --> 00:31:00,680
我現在有三台 iOS26 的裝置，

498
00:31:00,680 --> 00:31:02,780
其中一台還沒升到正式版，

499
00:31:02,780 --> 00:31:04,680
剛好忘記升級了，

500
00:31:04,680 --> 00:31:06,020
所以還沒升，

501
00:31:06,020 --> 00:31:08,880
那台上面是會動的，

502
00:31:08,920 --> 00:31:10,920
但升到正式版的就動不了

503
00:31:10,920 --> 00:31:12,720
這點讓我很困擾，

504
00:31:12,720 --> 00:31:14,480
我已經在 Developer Forum

505
00:31:14,480 --> 00:31:15,680
問了很多問題。

506
00:31:16,980 --> 00:31:19,680
不過，Apple 的工程師是說

507
00:31:19,680 --> 00:31:22,580
「好像是會動的」，

508
00:31:22,620 --> 00:31:24,120
所以我把 error log 寄過去，

509
00:31:24,120 --> 00:31:28,480
請他們幫我調查了

510
00:31:32,720 --> 00:31:35,680
為了驗證而寫的程式碼，

511
00:31:35,680 --> 00:31:38,280
我也公開在 GitHub 上了

512
00:31:38,280 --> 00:31:42,480
有興趣的人之後可以看看

513
00:31:47,620 --> 00:31:50,680
關於「如果要把這功能加進 Mitene 的上傳」...

514
00:31:50,720 --> 00:31:54,980
我也大概試著做了一下

515
00:31:54,980 --> 00:31:58,080
還沒決定要不要真的採用，

516
00:31:58,080 --> 00:32:01,080
如果要加進 Mitene 的上傳，

517
00:32:01,120 --> 00:32:03,480
那當然，

518
00:32:03,520 --> 00:32:05,580
如果是 iOS26，

519
00:32:05,580 --> 00:32:07,720
就會想用 `BGContinuedProcessingTask`

520
00:32:07,720 --> 00:32:08,920
對吧？

521
00:32:08,920 --> 00:32:11,020
我是這麼想的

522
00:32:12,820 --> 00:32:14,680
好，因為這個影片也...

523
00:32:14,720 --> 00:32:16,820
大家可能也看不懂在幹嘛，

524
00:32:16,820 --> 00:32:20,280
總之我把「試做看看」的影片

525
00:32:20,280 --> 00:32:22,280
貼在簡報裡了

526
00:32:22,280 --> 00:32:23,380
就是這樣

527
00:32:28,620 --> 00:32:31,220
最後是總結

528
00:32:31,280 --> 00:32:35,480
我憑我的感覺做了一個比較表，

529
00:32:35,480 --> 00:32:37,680
大概是這樣

530
00:32:37,680 --> 00:32:39,880
實作的難易度，

531
00:32:39,880 --> 00:32:44,980
PIP 的實作我還是覺得有點難，

532
00:32:45,020 --> 00:32:48,480
但 `ContinuedProcessingTask` 的實作就沒那麼難，

533
00:32:48,480 --> 00:32:50,780
實作本身不難，

534
00:32:50,780 --> 00:32:53,880
鎖定時也能運作，

535
00:32:53,880 --> 00:32:55,080
這點很不錯

536
00:32:55,080 --> 00:32:59,580
UI 的自由度，因為基本上是統一的規格，

537
00:32:59,580 --> 00:33:01,680
所以沒什麼自由度可言

538
00:33:01,680 --> 00:33:05,480
但基本上鎖定時也能上傳，

539
00:33:05,520 --> 00:33:06,720
這點很棒，

540
00:33:06,720 --> 00:33:12,480
所以等 XCode26 支援了之後，想來試試看

541
00:33:12,480 --> 00:33:16,680
總結大概也是這樣

542
00:33:16,680 --> 00:33:19,180
目前是透過 Picture In Picture，

543
00:33:19,180 --> 00:33:22,620
讓 iOS App 也能做到背景上傳，

544
00:33:22,620 --> 00:33:23,980
這是一點，

545
00:33:23,980 --> 00:33:26,880
但鎖定時會停止，

546
00:33:26,880 --> 00:33:31,280
而 iOS26 的 `BGContinuedProcessingTask`

547
00:33:31,280 --> 00:33:34,880
讓我們知道，鎖定時似乎也能上傳了

548
00:33:38,980 --> 00:33:41,680
我的分享差不多到這裡結束了，

549
00:33:41,680 --> 00:33:45,120
Mitene 正在招募工程師，

550
00:33:45,120 --> 00:33:47,120
如果大家有興趣的話，

551
00:33:47,180 --> 00:33:51,680
歡迎來應徵

552
00:33:52,820 --> 00:33:56,480
感謝各位的聆聽

553
00:34:00,880 --> 00:34:02,180
謝謝您的發表

554
00:34:02,280 --> 00:34:04,420
接下來是 Q&A 時間

555
00:34:04,580 --> 00:34:07,880
有任何評論或問題的聽眾，請舉手示意

556
00:34:12,880 --> 00:34:14,680
稍後麥克風會傳過去，請您稍等

557
00:34:15,780 --> 00:34:17,980
謝謝您的分享

558
00:34:17,980 --> 00:34:19,080
內容非常有參考價值

559
00:34:19,180 --> 00:34:20,380
剛才您提到，

560
00:34:20,480 --> 00:34:24,320
如果是 iOS26 之後的版本，

561
00:34:24,320 --> 00:34:27,080
用官方的 API 應該是比較好的，

562
00:34:27,080 --> 00:34:29,880
但根據 App 實際的使用情況，

563
00:34:29,880 --> 00:34:31,980
iOS26 現在的佔比還很低，

564
00:34:31,980 --> 00:34:34,080
所以之前的版本...

565
00:34:34,080 --> 00:34:36,880
我忘記版本號了，

566
00:34:36,880 --> 00:34:39,380
在 26 以前的版本，

567
00:34:39,380 --> 00:34:42,520
我就在想是不是只能用 PIP 了，

568
00:34:42,520 --> 00:34:45,920
看了您的範例程式碼，

569
00:34:45,920 --> 00:34:47,880
我覺得好像做得出來，

570
00:34:47,880 --> 00:34:52,120
但我注意到一點，您寫了「專利申請中」，

571
00:34:52,180 --> 00:34:54,480
我就在想，如果用了那個，會不會被罵，

572
00:34:54,520 --> 00:35:00,420
想請教您，在方便透露的範圍內，專利的範圍大概是到哪裡？

573
00:35:00,420 --> 00:35:02,580
好的，謝謝您的提問。

574
00:35:02,580 --> 00:35:06,420
關於專利，這個嘛...

575
00:35:06,480 --> 00:35:11,780
該怎麼說呢，首先，申請專利的背景是，

576
00:35:11,780 --> 00:35:14,980
我在 mixi 工作，

577
00:35:14,980 --> 00:35:19,620
mixi 本來就傾向把各種功能拿去申請專利，

578
00:35:19,620 --> 00:35:21,920
公司有這樣的活動，

579
00:35:21,980 --> 00:35:23,020
作為其中的一環，

580
00:35:23,080 --> 00:35:26,680
高層...應該說部長，

581
00:35:26,680 --> 00:35:28,380
也說「這個功能是不是該去申請專利」，

582
00:35:28,420 --> 00:35:29,180
雖然是被這樣提醒

583
00:35:29,180 --> 00:35:31,080
才去做的，

584
00:35:31,080 --> 00:35:33,220
總之我們就申請了

585
00:35:33,280 --> 00:35:34,680
至於申請的內容，

586
00:35:34,680 --> 00:35:39,480
我聽說專利在提出申請後

587
00:35:39,520 --> 00:35:42,620
一年半就會公開，

588
00:35:42,680 --> 00:35:45,680
我記得我們是去年 8 月還 9 月提的，

589
00:35:45,720 --> 00:35:47,380
從那時算起一年半，

590
00:35:47,380 --> 00:35:53,580
大概明年 4 月左右應該就能看到了，

591
00:35:53,580 --> 00:35:57,380
詳細內容可能要麻煩您到時去確認，

592
00:35:57,380 --> 00:36:01,180
一方面是請您屆時去確認詳細內容，

593
00:36:01,220 --> 00:36:03,480
另一方面，由我來隨便亂講，可能也會被罵，

594
00:36:03,480 --> 00:36:07,220
所以如果您真的很在意，也許直接詢問 mixi 公司會比較好

595
00:36:07,220 --> 00:36:07,620
不好意思。

596
00:36:07,620 --> 00:36:11,320
不好意思

597
00:36:19,720 --> 00:36:20,880
謝謝您的提問

598
00:36:21,080 --> 00:36:22,920
還有其他評論或問題的聽眾嗎？

599
00:36:22,980 --> 00:36:24,220
請舉手

600
00:36:27,680 --> 00:36:31,320
我拿麥克風過去，請稍等

601
00:36:34,880 --> 00:36:37,080
一個是單純關於剛才那件事，

602
00:36:37,180 --> 00:36:39,280
專利...這裡有很多專家，

603
00:36:39,280 --> 00:36:43,280
如果在這裡細談，大概會牽扯出很多權利問題，

604
00:36:43,280 --> 00:36:45,580
（您那樣回答）真是太好了，這是我的感想。

605
00:36:45,620 --> 00:36:49,520
另外是一個單純的技術性問題

606
00:36:49,520 --> 00:36:51,680
剛才的 Picture In Picture

607
00:36:51,680 --> 00:36:54,380
是被判定為正在播放影片，

608
00:36:54,420 --> 00:36:57,920
所以您有設定了 audio category 對吧

609
00:36:57,920 --> 00:37:00,280
請問，舉例來說，如果用戶

610
00:37:00,280 --> 00:37:04,080
正在用 Apple Music 播放音樂時，

611
00:37:04,080 --> 00:37:09,220
在 audio 方面不會有衝突嗎？

612
00:37:09,280 --> 00:37:11,280
像是音樂播放被中斷之類的

613
00:37:11,280 --> 00:37:12,020
是的是的。

614
00:37:12,020 --> 00:37:13,280
沒有發生嗎？

615
00:37:13,320 --> 00:37:15,180
謝謝您的提問

616
00:37:15,180 --> 00:37:17,380
該說是個好問題嗎...

617
00:37:17,380 --> 00:37:22,480
這正是我們在發布時修正過的地方，

618
00:37:22,480 --> 00:37:25,380
確實如您所說，

619
00:37:25,380 --> 00:37:27,580
它是會衝突的

620
00:37:27,580 --> 00:37:31,980
App...我們一開始發布這個功能時，

621
00:37:31,980 --> 00:37:34,120
App 一啟動，就不管三七二十一，

622
00:37:34,120 --> 00:37:36,080
想說「因為有可能會用到 Picture In Picture」，

623
00:37:36,080 --> 00:37:38,020
就設定了剛才提到的 playback，

624
00:37:38,080 --> 00:37:40,680
但如果那麼做，就會像您說的，

625
00:37:40,680 --> 00:37:43,180
Apple Music 的音樂就會被中斷，

626
00:37:43,180 --> 00:37:46,180
所以我們改成限定在「開始上傳時」

627
00:37:46,180 --> 00:37:50,480
才去做 audio session 的設定。

628
00:37:50,520 --> 00:37:53,420
我們盡可能把（設定的）範圍縮到最小，

629
00:37:53,420 --> 00:37:58,420
雖然下工夫讓音樂不會意外被中斷，

630
00:37:58,420 --> 00:38:04,180
但確實還是存在會互相競爭的這個問題

631
00:38:05,820 --> 00:38:06,920
了解了，謝謝您

632
00:38:06,920 --> 00:38:07,580
謝謝

633
00:38:07,980 --> 00:38:10,780
感謝您的提問

634
00:38:10,880 --> 00:38:13,120
還有其他評論或問題的聽眾嗎？

635
00:38:13,180 --> 00:38:15,180
請舉手

636
00:38:22,280 --> 00:38:24,080
還有沒有其他人呢？

637
00:38:30,820 --> 00:38:32,620
時間差不多到了，

638
00:38:32,620 --> 00:38:33,980
我們的 Q&A 時間到此結束

639
00:38:34,480 --> 00:38:36,980
接下來是 1 分鐘的回饋時間

640
00:38:37,020 --> 00:38:40,720
1 分鐘的回饋時間

641
00:38:40,720 --> 00:38:46,980
請掃描螢幕上的 QR code 來提交您的回饋

642
00:39:07,020 --> 00:39:29,980
感謝您的收看

